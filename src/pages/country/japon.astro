---
import BaseLayout from "../../layouts/BaseLayout.astro";

/* ====== DonnÃ©es FR (rÃ©fÃ©rence) ====== */
const FR = {
  restaurant: 15.5,      // â‚¬ repas moyen
  salaireNet: 2150,      // â‚¬ salaire mensuel net moyen
  loyer: 800,            // â‚¬ loyer 1ch centre-ville
  essence: 1.90,         // â‚¬ / L
  cinema: 11.0,          // â‚¬ la place
  hotel: 100,            // â‚¬ / nuit
  habiterIndex: 100      // indice de rÃ©fÃ©rence (France = 100)
};

/* ====== DonnÃ©es JP (exemples) ======
   Tu ajusteras librement ces chiffres plus tard. */
const JP = {
  restaurant: 9.8,       // â‚¬
  salaireNet: 1900,      // â‚¬
  loyer: 650,            // â‚¬
  essence: 1.30,         // â‚¬
  cinema: 10.7,          // â‚¬
  hotel: 113,            // â‚¬  â†’ ~13% plus cher que FR
  habiterIndex: 82       // â†’ ~18% moins cher que FR
};

function diffLabel(valJP:number, valFR:number) {
  const pct = ((valJP - valFR) / valFR) * 100;
  const abs = Math.abs(pct);
  if (abs < 1) return { text: "similaire", color: "var(--muted)" };
  return pct < 0
    ? { text: `${abs.toFixed(0)}% moins cher`, color: "var(--green)" }
    : { text: `${abs.toFixed(0)}% plus cher`,  color: "var(--red)"   };
}
function eur(n:number){ return n.toLocaleString("fr-FR",{style:"currency",currency:"EUR"}); }

const title = "Prix de la vie au Japon (comparÃ© Ã  la France)";
---
<BaseLayout title={title} description="Repas, salaires, loyers, essence, cinÃ©ma, hÃ´tel et indice 'Habiter' au Japon â€” comparÃ©s Ã  la France.">
  <style>
    :root { --red:#e03131; --green:#2f9e44; }
    .kpi-title{display:flex;align-items:center;gap:.4rem}
  </style>

  <!-- BanniÃ¨re Japon -->
  <div class="banner" style="margin:18px 0;border:1px solid var(--line);border-radius:18px;overflow:hidden;box-shadow:var(--shadow);">
    <img src="/banners/japon.jpg" alt="BanniÃ¨re Japon" style="width:100%;height:220px;object-fit:cover;" />
  </div>

  <!-- Intro -->
  <div class="card" style="background:var(--accent-100);margin-top:20px;">
    <h1 style="margin:0 0 10px 0;font-size:1.8rem;">Japon ğŸ‡¯ğŸ‡µ â€” ComparÃ© Ã  la France</h1>
    <p style="color:var(--muted);font-size:1.05rem;line-height:1.6;margin:0;">
      AperÃ§u des coÃ»ts moyens au Japon, avec comparaison directe Ã  la rÃ©fÃ©rence France.
      Les valeurs varient selon les rÃ©gions (Tokyo, Osaka, Kyoto), mais donnent une tendance nationale.
    </p>
  </div>

    <!-- Bloc chiffres clÃ©s -->
  <h2 style="margin-top:26px;">Chiffres clÃ©s (vs France)</h2>

  <div style="
    background: var(--accent-100);
    border: 1px solid #ffd0df;
    border-radius: 18px;
    padding: 24px;
    margin-top: 14px;
    box-shadow: var(--shadow);
  ">
    <div class="grid">
      <!-- Restaurant -->
      <div class="card">
        <div class="kpi-title">ğŸ½ï¸ Repas au restaurant</div>
        <div style="font-size:1.4rem;color:var(--accent);font-weight:600;">{eur(JP.restaurant)}</div>
        {(() => {
          const {text,color} = diffLabel(JP.restaurant, FR.restaurant);
          return <div style={`color:var(--muted);margin-top:6px;`}>
            En France : {eur(FR.restaurant)} â†’ <strong style={`color:${color}`}>{text}</strong>
          </div>
        })()}
      </div>

      <!-- Salaire -->
      <div class="card">
        <div class="kpi-title">ğŸ’° Salaire mensuel net moyen</div>
        <div style="font-size:1.4rem;color:var(--accent);font-weight:600;">{eur(JP.salaireNet)}</div>
        {(() => {
          const {text,color} = diffLabel(JP.salaireNet, FR.salaireNet);
          return <div style={`color:var(--muted);margin-top:6px;`}>
            En France : {eur(FR.salaireNet)} â†’ <strong style={`color:${color}`}>{text}</strong>
          </div>
        })()}
      </div>

      <!-- Loyer -->
      <div class="card">
        <div class="kpi-title">ğŸ  Loyer mensuel (1 chambre, centre-ville)</div>
        <div style="font-size:1.4rem;color:var(--accent);font-weight:600;">{eur(JP.loyer)}</div>
        {(() => {
          const {text,color} = diffLabel(JP.loyer, FR.loyer);
          return <div style={`color:var(--muted);margin-top:6px;`}>
            En France : {eur(FR.loyer)} â†’ <strong style={`color:${color}`}>{text}</strong>
          </div>
        })()}
      </div>

      <!-- Essence -->
      <div class="card">
        <div class="kpi-title">â›½ Essence (1 L)</div>
        <div style="font-size:1.4rem;color:var(--accent);font-weight:600;">{eur(JP.essence)}</div>
        {(() => {
          const {text,color} = diffLabel(JP.essence, FR.essence);
          return <div style={`color:var(--muted);margin-top:6px;`}>
            En France : {eur(FR.essence)} â†’ <strong style={`color:${color}`}>{text}</strong>
          </div>
        })()}
      </div>

      <!-- CinÃ©ma -->
      <div class="card">
        <div class="kpi-title">ğŸ¬ CinÃ©ma (1 place)</div>
        <div style="font-size:1.4rem;color:var(--accent);font-weight:600;">{eur(JP.cinema)}</div>
        {(() => {
          const {text,color} = diffLabel(JP.cinema, FR.cinema);
          return <div style={`color:var(--muted);margin-top:6px;`}>
            En France : {eur(FR.cinema)} â†’ <strong style={`color:${color}`}>{text}</strong>
          </div>
        })()}
      </div>

      <!-- HÃ´tel -->
      <div class="card">
        <div class="kpi-title">ğŸ›ï¸ HÃ´tel (1 nuit)</div>
        <div style="font-size:1.4rem;color:var(--accent);font-weight:600;">{eur(JP.hotel)}</div>
        {(() => {
          const {text,color} = diffLabel(JP.hotel, FR.hotel);
          return <div style={`color:var(--muted);margin-top:6px;`}>
            En France : {eur(FR.hotel)} â†’ <strong style={`color:${color}`}>{text}</strong>
          </div>
        })()}
      </div>

      <!-- Indice â€œHabiterâ€ -->
      <div class="card">
        <div class="kpi-title">ğŸ¡ Indice â€œHabiterâ€</div>
        <div style="font-size:1.4rem;color:var(--accent);font-weight:600;">{JP.habiterIndex}</div>
        {(() => {
          const {text,color} = diffLabel(JP.habiterIndex, FR.habiterIndex);
          return <div style={`color:var(--muted);margin-top:6px;`}>
            France = 100 â†’ <strong style={`color:${color}`}>{text}</strong>
          </div>
        })()}
      </div>
    </div>
  </div>
</BaseLayout>
