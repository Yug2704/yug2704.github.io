---
const title = "Prix de la vie – Accueil";
import categories from "../data/categories.json";
---
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content="Comparez les prix par pays et par catégories — toujours vs France." />
    <style>
      :root{
        --bg:#ffffff;
        --text:#111827;
        --muted:#4b5563;
        --line:#e5e7eb;
        --card:#ffffff;
        --shadow:0 6px 18px rgba(17,24,39,.06);
        --accent:#ff4d8d;
        --accent-600:#ef437f;
        --accent-100:#fff1f6;  /* rose pâle du fond */
      }
      *{box-sizing:border-box}
      body{
        margin:0;
        font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;
        background:var(--bg);
        color:var(--text);
      }
      .container{max-width:1100px;margin:0 auto;padding:16px}
      header{
        position:sticky;top:0;background:#ffffffcc;
        backdrop-filter:saturate(1.2) blur(6px);
        border-bottom:1px solid var(--line);
        z-index:10;
      }
      a{color:inherit;text-decoration:none}
      .pill{
        background:#f8fafc;border:1px solid var(--line);
        border-radius:999px;padding:6px 12px;color:var(--muted);
      }
      .pill:hover{background:#f1f5f9}
      .banner{
        margin:18px 0;border:1px solid var(--line);
        border-radius:18px;overflow:hidden;box-shadow:var(--shadow);
      }
      .banner img{width:100%;height:220px;object-fit:cover}
      .search-wrap{position:relative;margin-top:-22px;padding:10px 0}
      .ribbon{
        position:absolute;inset:0;height:64px;margin:auto;
        left:8px;right:8px;
        background:linear-gradient(90deg,#ffc2d5,#ff8db2,#ffc2d5);
        border-radius:999px;filter:blur(10px)saturate(1.1);
        opacity:.7;z-index:0;
      }
      .search{
        position:relative;z-index:1;display:flex;gap:8px;align-items:center;
        background:#ffffff;border:1px solid var(--line);
        border-radius:999px;padding:10px 12px;box-shadow:var(--shadow);
      }
      .search input{flex:1;background:transparent;border:none;outline:none;color:var(--text);}
      .btn{
        display:inline-block;padding:.65rem 1rem;border-radius:999px;
        background:var(--accent);color:#fff;border:1px solid transparent;
        box-shadow:0 4px 12px rgba(255,77,141,.35);
      }
      .btn:hover{background:var(--accent-600)}
      .intro{
        background:var(--accent-100);
        border-radius:16px;
        padding:24px 20px;
        box-shadow:var(--shadow);
        margin-top:20px;
      }
      .intro h2{
        margin:0 0 10px 0;
      }
      .intro p{
        color:var(--muted);
        font-size:1.02rem;
        line-height:1.65;
        margin:0;
      }
      .grid{display:grid;gap:14px;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));margin-top:22px;}
      .card{
        background:var(--card);border:1px solid var(--line);
        border-radius:16px;padding:16px;box-shadow:var(--shadow);
      }
      code{background:#f8fafc;border:1px solid var(--line);border-radius:6px;padding:2px 6px}
      footer{border-top:1px solid var(--line);margin-top:28px}

        /* --- Cases cliquables catégories --- */
      .chips{
        display:flex;
        flex-wrap:wrap;
        gap:10px;
        margin-top:14px;
      }
      .chip{
        display:inline-block;
        padding:8px 12px;
        border-radius:999px;
        background:var(--accent-100);
        color:#a61b4d;
        border:1px solid #ffd0df;
        font-size:.95rem;
        box-shadow: var(--shadow);
        transition: all .15s ease;
      }
      .chip:hover{
        filter:brightness(1.05);
        transform:translateY(-1px);
      }

    </style>
  </head>
  <body>
    <header>
      <div class="container" style="display:flex;justify-content:space-between;align-items:center;height:64px;">
        <a href="/" style="font-weight:700">Prix de la vie</a>
        <nav style="display:flex;gap:12px">
          <a class="pill" href="/">Accueil</a>
          <a class="pill" href="/category/restaurant">Toutes catégories</a>
        </nav>
      </div>
    </header>

    <main class="container">
      <div class="banner">
        <img src="/banners/france.jpg" alt="Bannière" />
      </div>

      <div class="search-wrap">
        <div class="ribbon" aria-hidden="true"></div>
        <div class="search">
          <input id="q" placeholder="Rechercher (ex: Japon, Tokyo, Lait, Japon-lait)" />
          <a class="btn" id="go" href="#">Rechercher</a>
        </div>
      </div>

      <div class="intro">
        <h2>Bienvenue sur Prix de la vie</h2>
        <p>
          Découvrez les prix de la vie dans des dizaines de pays et de villes à travers le monde.
          Chaque donnée est comparée à la France pour vous aider à visualiser les différences
          de coût de la vie, que ce soit pour les repas, logements, transports ou produits du quotidien.
        </p>
      </div>

      <!-- Catégories cliquables -->
      <div class="chips">
        {categories.map(cat => (
          <a class="chip" href={`/category/${cat.slug}`}>{cat.name}</a>
        ))}
      </div>

      <div class="grid">
        <div class="card">Ajoute des pages et données dans <code>src/pages</code> et <code>src/data</code>.</div>
        <div class="card">Le déploiement GitHub Pages est automatique.</div>
      </div>
    </main>

    <footer>
      <div class="container" style="display:flex;justify-content:space-between;align-items:center;height:64px;">
        <span>© {new Date().getFullYear()} Prix de la vie</span>
        <a class="pill" href="/sitemap.xml">sitemap</a>
      </div>
    </footer>

    <script>
      const q = document.getElementById('q');
      const go = document.getElementById('go');
      function openBestMatch(){
        const term = (q.value||"").toLowerCase().trim();
        if(!term) return;
        if(term.includes('-')){ const [a,b] = term.split('-'); location.href = `/country/${a}/${b}`; return; }
        fetch(`/country/${term}/index.html`, {method:'HEAD'}).then(r=>{
          if(r.ok) location.href = `/country/${term}`;
          else location.href = `/category/${term}`;
        }).catch(()=> location.href = `/category/${term}`);
      }
      go.addEventListener('click', e=>{e.preventDefault();openBestMatch();});
      q.addEventListener('keydown', e=>{if(e.key==='Enter')openBestMatch();});
    </script>
  </body>
</html>
